{"ast":null,"code":"var _jsxFileName = \"C:\\\\study\\\\LocalRentalKing\\\\front\\\\pages\\\\search\\\\[searchInput].js\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport AppLayout from '../../components/AppLayout/AppLayout';\nimport Layout from \"../../components/Layout\";\nimport { LOAD_SEARCH_POSTS_REQUEST } from \"../../reducers/post\";\nimport Tags from \"../../components/Tags\";\nimport { Button } from \"antd\";\nimport PostCard1 from \"../../components/PostCard1\";\nimport PostCard2 from \"../../components/PostCard2\";\n\nfunction SearchResult() {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const {\n    searchInput\n  } = router.query; // [tag].js 파일 명의 [] 부분이 들어간다\n\n  const {\n    mainPosts,\n    hasMorePost,\n    loadPostLoading,\n    boardNum\n  } = useSelector(state => state.post);\n  const {\n    userInfo,\n    me,\n    local\n  } = useSelector(state => state.user);\n  const categoryAndsearch = searchInput.split('*');\n  const select = categoryAndsearch[0];\n  const searchword = categoryAndsearch[1];\n  const {\n    0: view,\n    1: setView\n  } = useState(true);\n  const onSwitch = useCallback(() => {\n    setView(!view);\n  }, [view]);\n  useEffect(() => {\n    console.log(local);\n    console.log(select);\n    console.log(searchword);\n    console.log(boardNum);\n    dispatch({\n      // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\n      type: LOAD_SEARCH_POSTS_REQUEST,\n      local: local,\n      select: select,\n      searchword: searchword,\n      boardNum: boardNum // boardNum 게시판의 select 요소를 기준으로 searchword 와 관련된 local 지역의 데이터를 가져온다.\n\n    });\n  }, [local, select, searchword, boardNum]); // useEffect(() => {\n  //   const onScroll = () => {\n  //     if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n  //       if (hasMorePost && !loadPostLoading) {\n  //         dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\n  //           type: LOAD_SEARCH_POSTS_REQUEST,\n  //           local: local,\n  //           select : select,\n  //           search: search,\n  //         });\n  //       }\n  //     }\n  //   };\n  //   window.addEventListener('scroll', onScroll);\n  //   return () => {\n  //     window.removeEventListener('scroll', onScroll);\n  //   };\n  // }, [mainPosts.length, hasMorePost, searchInput, loadPostLoading]);\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default SearchResult;","map":{"version":3,"sources":["C:/study/LocalRentalKing/front/pages/search/[searchInput].js"],"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","useRouter","AppLayout","Layout","LOAD_SEARCH_POSTS_REQUEST","Tags","Button","PostCard1","PostCard2","SearchResult","dispatch","router","searchInput","query","mainPosts","hasMorePost","loadPostLoading","boardNum","state","post","userInfo","me","local","user","categoryAndsearch","split","select","searchword","view","setView","onSwitch","console","log","type"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAsD,OAAtD;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAAQC,yBAAR,QAAwC,qBAAxC;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAAQC,MAAR,QAAqB,MAArB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;;AAEA,SAASC,YAAT,GAAwB;AACtB,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,MAAM,GAAGV,SAAS,EAAxB;AACA,QAAM;AAACW,IAAAA;AAAD,MAAgBD,MAAM,CAACE,KAA7B,CAHsB,CAGc;;AACpC,QAAM;AAACC,IAAAA,SAAD;AAAYC,IAAAA,WAAZ;AAAyBC,IAAAA,eAAzB;AAA2CC,IAAAA;AAA3C,MAAuDjB,WAAW,CAAEkB,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAAxE;AACA,QAAM;AAACC,IAAAA,QAAD;AAAWC,IAAAA,EAAX;AAAcC,IAAAA;AAAd,MAAuBtB,WAAW,CAAEkB,KAAD,IAAWA,KAAK,CAACK,IAAlB,CAAxC;AAEA,QAAMC,iBAAiB,GAAGZ,WAAW,CAACa,KAAZ,CAAkB,GAAlB,CAA1B;AACA,QAAMC,MAAM,GAAGF,iBAAiB,CAAC,CAAD,CAAhC;AACA,QAAMG,UAAU,GAAGH,iBAAiB,CAAC,CAAD,CAApC;AAEA,QAAM;AAAA,OAACI,IAAD;AAAA,OAAOC;AAAP,MAAkB/B,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMgC,QAAQ,GAAGlC,WAAW,CAAC,MAAM;AACjCiC,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACD,GAF2B,EAEzB,CAACA,IAAD,CAFyB,CAA5B;AAIA/B,EAAAA,SAAS,CAAC,MAAM;AACdkC,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYL,UAAZ;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYf,QAAZ;AACAP,IAAAA,QAAQ,CAAC;AAAE;AACTuB,MAAAA,IAAI,EAAE7B,yBADC;AAEPkB,MAAAA,KAAK,EAAEA,KAFA;AAGPI,MAAAA,MAAM,EAAEA,MAHD;AAIPC,MAAAA,UAAU,EAAEA,UAJL;AAKPV,MAAAA,QAAQ,EAAEA,QALH,CAMP;;AANO,KAAD,CAAR;AAQD,GAbQ,EAaN,CAACK,KAAD,EAAOI,MAAP,EAAcC,UAAd,EAAyBV,QAAzB,CAbM,CAAT,CAjBsB,CAgCtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAmBD;;AAED,eAAeR,YAAf","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useRouter} from 'next/router';\r\nimport AppLayout from '../../components/AppLayout/AppLayout';\r\nimport Layout from \"../../components/Layout\";\r\nimport {LOAD_SEARCH_POSTS_REQUEST} from \"../../reducers/post\";\r\nimport Tags from \"../../components/Tags\";\r\nimport {Button} from \"antd\";\r\nimport PostCard1 from \"../../components/PostCard1\";\r\nimport PostCard2 from \"../../components/PostCard2\";\r\n\r\nfunction SearchResult() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const {searchInput} = router.query; // [tag].js 파일 명의 [] 부분이 들어간다\r\n  const {mainPosts, hasMorePost, loadPostLoading , boardNum} = useSelector((state) => state.post);\r\n  const {userInfo, me,local} = useSelector((state) => state.user);\r\n\r\n  const categoryAndsearch = searchInput.split('*');\r\n  const select = categoryAndsearch[0];\r\n  const searchword = categoryAndsearch[1];\r\n\r\n  const [view, setView] = useState(true);\r\n\r\n  const onSwitch = useCallback(() => {\r\n    setView(!view);\r\n  }, [view]);\r\n\r\n  useEffect(() => {\r\n    console.log(local);\r\n    console.log(select);\r\n    console.log(searchword);\r\n    console.log(boardNum);\r\n    dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\r\n      type: LOAD_SEARCH_POSTS_REQUEST,\r\n      local: local,\r\n      select: select,\r\n      searchword: searchword,\r\n      boardNum: boardNum,\r\n      // boardNum 게시판의 select 요소를 기준으로 searchword 와 관련된 local 지역의 데이터를 가져온다.\r\n    });\r\n  }, [local,select,searchword,boardNum]);\r\n\r\n  // useEffect(() => {\r\n  //   const onScroll = () => {\r\n  //     if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\r\n  //       if (hasMorePost && !loadPostLoading) {\r\n  //         dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\r\n  //           type: LOAD_SEARCH_POSTS_REQUEST,\r\n  //           local: local,\r\n  //           select : select,\r\n  //           search: search,\r\n  //         });\r\n  //       }\r\n  //     }\r\n  //   };\r\n  //   window.addEventListener('scroll', onScroll);\r\n  //   return () => {\r\n  //     window.removeEventListener('scroll', onScroll);\r\n  //   };\r\n  // }, [mainPosts.length, hasMorePost, searchInput, loadPostLoading]);\r\n\r\n  return (\r\n    <div>\r\n      {/*<Layout>*/}\r\n      {/*  view ? (*/}\r\n      {/*  <Layout>*/}\r\n      {/*    <Tags tagsData={object_TagsData} boardNum={1}/>*/}\r\n      {/*    <Button onClick={onSwitch}>전환스위치</Button>*/}\r\n      {/*    {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}*/}\r\n      {/*  </Layout>*/}\r\n      {/*  ) : (*/}\r\n      {/*  <Layout>*/}\r\n      {/*    <Tags tagsData={object_TagsData} boardNum={1}/>*/}\r\n      {/*    <Button onClick={onSwitch}>전환스위치</Button>*/}\r\n      {/*    {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}*/}\r\n      {/*  </Layout>*/}\r\n      {/*  )}*/}\r\n      {/*</Layout>}*/}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchResult;\r\n"]},"metadata":{},"sourceType":"module"}