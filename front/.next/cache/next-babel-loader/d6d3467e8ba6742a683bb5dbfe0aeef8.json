{"ast":null,"code":"var _jsxFileName = \"C:\\\\study\\\\LocalRentalKing\\\\front\\\\pages\\\\search\\\\[searchInput].js\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport AppLayout from '../../components/AppLayout/AppLayout';\nimport Layout from \"../../components/Layout\";\nimport { LOAD_SEARCH_POSTS_REQUEST } from \"../../reducers/post\";\nimport Tags from \"../../components/Tags\";\nimport { Button } from \"antd\";\nimport PostCard1 from \"../../components/PostCard1\";\nimport PostCard2 from \"../../components/PostCard2\";\n\nfunction SearchResult() {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const {\n    searchInput\n  } = router.query; // [tag].js 파일 명의 [] 부분이 들어간다\n\n  const {\n    mainPosts,\n    hasMorePost,\n    loadPostLoading,\n    boardNum,\n    object_TagsData\n  } = useSelector(state => state.post);\n  const {\n    userInfo,\n    me,\n    local\n  } = useSelector(state => state.user);\n  const categoryAndsearch = searchInput.split('*');\n  const select = categoryAndsearch[0];\n  const searchword = categoryAndsearch[1];\n  const {\n    0: view,\n    1: setView\n  } = useState(true);\n  const onSwitch = useCallback(() => {\n    setView(!view);\n  }, [view]);\n  useEffect(() => {\n    console.log(local);\n    console.log(select);\n    console.log(searchword);\n    console.log(boardNum);\n    dispatch({\n      // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\n      type: LOAD_SEARCH_POSTS_REQUEST,\n      local: local,\n      select: select,\n      searchword: searchword,\n      boardNum: boardNum // boardNum 게시판의 select 요소를 기준으로 searchword 와 관련된 local 지역의 데이터를 가져온다.\n\n    });\n  }, [local, select, searchword, boardNum]); // useEffect(() => {\n  //   const onScroll = () => {\n  //     if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\n  //       if (hasMorePost && !loadPostLoading) {\n  //         dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\n  //           type: LOAD_SEARCH_POSTS_REQUEST,\n  //           local: local,\n  //           select : select,\n  //           search: search,\n  //         });\n  //       }\n  //     }\n  //   };\n  //   window.addEventListener('scroll', onScroll);\n  //   return () => {\n  //     window.removeEventListener('scroll', onScroll);\n  //   };\n  // }, [mainPosts.length, hasMorePost, searchInput, loadPostLoading]);\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, boardNum === 1 && __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, view ? __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard1, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 36\n    }\n  }))) : __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard2, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 36\n    }\n  })))), boardNum === 2 && __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, view ? __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard1, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 38\n    }\n  }))) : __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard2, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 38\n    }\n  })))), boardNum === 3 && __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, view ? __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard1, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 38\n    }\n  }))) : __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard2, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 38\n    }\n  })))), boardNum === 4 && __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, view ? __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard1, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 38\n    }\n  }))) : __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard2, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 38\n    }\n  })))), boardNum === 5 && __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, view ? __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard1, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 38\n    }\n  }))) : __jsx(React.Fragment, null, __jsx(Tags, {\n    tagsData: object_TagsData,\n    boardNum: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"\\uC804\\uD658\\uC2A4\\uC704\\uCE58\"), mainPosts.map(post => __jsx(PostCard2, {\n    key: post.id,\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 38\n    }\n  })))));\n}\n\nexport default SearchResult;","map":{"version":3,"sources":["C:/study/LocalRentalKing/front/pages/search/[searchInput].js"],"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","useRouter","AppLayout","Layout","LOAD_SEARCH_POSTS_REQUEST","Tags","Button","PostCard1","PostCard2","SearchResult","dispatch","router","searchInput","query","mainPosts","hasMorePost","loadPostLoading","boardNum","object_TagsData","state","post","userInfo","me","local","user","categoryAndsearch","split","select","searchword","view","setView","onSwitch","console","log","type","map","id"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useRouter} from 'next/router';\r\nimport AppLayout from '../../components/AppLayout/AppLayout';\r\nimport Layout from \"../../components/Layout\";\r\nimport {LOAD_SEARCH_POSTS_REQUEST} from \"../../reducers/post\";\r\nimport Tags from \"../../components/Tags\";\r\nimport {Button} from \"antd\";\r\nimport PostCard1 from \"../../components/PostCard1\";\r\nimport PostCard2 from \"../../components/PostCard2\";\r\n\r\nfunction SearchResult() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const {searchInput} = router.query; // [tag].js 파일 명의 [] 부분이 들어간다\r\n  const {mainPosts, hasMorePost, loadPostLoading , boardNum ,object_TagsData} = useSelector((state) => state.post);\r\n  const {userInfo, me,local} = useSelector((state) => state.user);\r\n\r\n  const categoryAndsearch = searchInput.split('*');\r\n  const select = categoryAndsearch[0];\r\n  const searchword = categoryAndsearch[1];\r\n\r\n  const [view, setView] = useState(true);\r\n\r\n  const onSwitch = useCallback(() => {\r\n    setView(!view);\r\n  }, [view]);\r\n\r\n  useEffect(() => {\r\n    console.log(local);\r\n    console.log(select);\r\n    console.log(searchword);\r\n    console.log(boardNum);\r\n    dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\r\n      type: LOAD_SEARCH_POSTS_REQUEST,\r\n      local: local,\r\n      select: select,\r\n      searchword: searchword,\r\n      boardNum: boardNum,\r\n      // boardNum 게시판의 select 요소를 기준으로 searchword 와 관련된 local 지역의 데이터를 가져온다.\r\n    });\r\n  }, [local,select,searchword,boardNum]);\r\n\r\n  // useEffect(() => {\r\n  //   const onScroll = () => {\r\n  //     if (window.pageYOffset + document.documentElement.clientHeight > document.documentElement.scrollHeight - 300) {\r\n  //       if (hasMorePost && !loadPostLoading) {\r\n  //         dispatch({ // 검색어를 제목에서 포함하며, 지역이 일치하는 게시물들을 10개씩요청\r\n  //           type: LOAD_SEARCH_POSTS_REQUEST,\r\n  //           local: local,\r\n  //           select : select,\r\n  //           search: search,\r\n  //         });\r\n  //       }\r\n  //     }\r\n  //   };\r\n  //   window.addEventListener('scroll', onScroll);\r\n  //   return () => {\r\n  //     window.removeEventListener('scroll', onScroll);\r\n  //   };\r\n  // }, [mainPosts.length, hasMorePost, searchInput, loadPostLoading]);\r\n\r\n  return (\r\n    <div>\r\n      {boardNum === 1 &&\r\n      <Layout>\r\n        {view ? (\r\n          <>\r\n          <Tags tagsData={object_TagsData} boardNum={1}/>\r\n          <Button onClick={onSwitch}>전환스위치</Button>\r\n          {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}\r\n          </>\r\n        ) : (\r\n          <>\r\n          <Tags tagsData={object_TagsData} boardNum={1}/>\r\n          <Button onClick={onSwitch}>전환스위치</Button>\r\n          {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}\r\n          </>\r\n        )}\r\n      </Layout>}\r\n      {boardNum === 2 &&\r\n      <Layout>\r\n        {view ? (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}\r\n          </>\r\n        )}\r\n      </Layout>}\r\n      {boardNum === 3 &&\r\n      <Layout>\r\n        {view ? (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}\r\n          </>\r\n        )}\r\n      </Layout>}\r\n      {boardNum === 4 &&\r\n      <Layout>\r\n        {view ? (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}\r\n          </>\r\n        )}\r\n      </Layout>}\r\n      {boardNum === 5 &&\r\n      <Layout>\r\n        {view ? (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard1 key={post.id} post={post}/>)}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Tags tagsData={object_TagsData} boardNum={1}/>\r\n            <Button onClick={onSwitch}>전환스위치</Button>\r\n            {mainPosts.map((post) => <PostCard2 key={post.id} post={post}/>)}\r\n          </>\r\n        )}\r\n      </Layout>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchResult;\r\n"]},"metadata":{},"sourceType":"module"}